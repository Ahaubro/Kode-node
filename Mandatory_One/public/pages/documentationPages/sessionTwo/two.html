<br/>

<h2>Session two: Express server</h2>

<br/>
<br/>

<div id="cleanCode" class="box-bottom-shadow">
    <h3>Clean code and code conventions</h3>

    <p>Clean code is important, because of many reasons.
       But the most important being, that your code will be
       much easier to read and understand for another developer.
       Here is som rules to remember: 
    </p>

    <nav class="navPadding">
        <li>Structure is key</li>
        <li>Name variables so they make sense</li>
    </nav>


</div>


<div id="callbacks" class="box-bottom-shadow">
    <h3>Callbacks</h3>

    <p>There are three ways to define a callback function in JS.
        <nav class="navPadding">
            <li> Arrow function:
                <p2>app.get("/", (req, res) => {
                res.send(frontpagePage);
                });
                </p2>
             - This is a simple arrow callback, where the method body is defined in the {}
            after the arrow "=>".
            </li>

            <li>Anonymous function: 
                <p2> app.get("/terminalCommands", function (req, res) {
                res.send(terminalCommandsPage); 
                 })
                </p2>
            </li>
            <li>Named function refference - By using the name of a predefined named function.</li>
        </nav>
    </p>

</div>


<div id="express" class="box-bottom-shadow">
    <h3>Create a server with Express</h3>

    <p>To create a server with Express, we first make a new project,
        and create a package.json file, which contains a pair of empty
        curly brackets. We then type npm install express in the console.
        When npm finishes the installation, we will have a folder "node modules" and a package lock file.
        Then create an app.js file in the project folder. This file needs to contain the following: 
    </p>
    <br/>
    <nav class="navPadding">
        <li> <P2>const express = require("express"); </P2> -Imports the express module</li>
        <li> <P2>const app = express(); </P2> - Creates a server object</li>
        <li> <P2>PORT = 9999; </P2> - Making a variable which contains the port</li>
        <li> <P2>app.listen(PORT, (error) => {
            console.log("Server running on port: " + PORT)</P2>
        }) - Sets the port when the file is executed, with a message</li>
    </nav>

    <p>I can now use my app object to make GET, POST, etc. methods or send html files. In the first code snippet below
        there is an example of a GET(findAll) from my beers.js RestApi. I define a path for my app.get, and then make an arrow 
        function with request and response and inside define the body. In this example I send an array containing all beers. 
    </p>

    <nav class="navPadding">
        <li> 
            <p2>
                app.get('/beers', (req, res) =>{
                const arrayJSON = JSON.stringify(beers)
                res.status(200).send('All beers: ' + arrayJSON)
                })
            </p2>
        </li>
    </nav>

    <br/>

    <p>
        In this simple example i send a html file:

        <nav class="navPadding">
            <li> 
                <p2>
                    app.get("/", (req, res) => {
                        res.sendFile(__dirname + "/public/index.html");
                    });
                </p2>
            </li>
        </nav>
    </p>

</div>